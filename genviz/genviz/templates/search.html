<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="bootstrap.css">
	<title>GenViz</title>
	<style type="text/css">
		.sequence {
			width:90%;
			word-break:break-all;
			font-family:'monospace';
			letter-spacing:10px;
			   border: pink solid;
    background-color: aliceblue;
		}


		body{
			background: #f2f2f2;
		}

		form{
			width: 50%;
		    background-color: white;
		    box-shadow: 2px 2px 5px #d8d8d8;
		    margin: auto auto;
		    padding: 5%;
		    position: absolute;
		    left: 50%;
		    top: 50%;
		    transform: translate(-50%, -50%);
		    -webkit-transform: translate(-50%, -50%);
		}

		label{
			width:  100%;
    		display:  block;
		}


		.campo{
			box-sizing: border-box;
    		height: 60px;
    		width: 100%;
    		margin: 25px auto;
   		}

   		input{
   			width: 100%;
   		}

   		#shortcuts{
   			margin: 15px 0;
   		}

   		.btn-default{
   			width: 100%;
    		margin: 5px 0;
   		}


	</style>
</head>
<body>

<form method='GET' action='' id='search-form'>
	<h1>GENVIZ</h1>
	<div class="campo">
		<label for="gen">Gen</label>
		<input type="text" name="gene" placeholder="Inserte el nombre del gen">
	</div>
	<div class="campo">
		<label for="gen">Organismo</label>
		<input type="text" name="organism" placeholder="Homo sapiens (por omisiÃ³n)">
	</div>

	<div id="shortcuts">
		<div class="row">
			<div class="col-md-3"><button type="button" class="btn btn-default">BRCA1</button></div>

			<div class="col-md-3"><button type="button" class="btn btn-default">BRCA2</button></div>

			<div class="col-md-3"><button type="button" class="btn btn-default">CFTR</button></div>

			<div class="col-md-3"><button type="button" class="btn btn-default">MLH1</button></div>
		</div>

		<div class="row">
			<div class="col-md-3"><button type="button" class="btn btn-default">MSH2</button></div>

			<div class="col-md-3"><button type="button" class="btn btn-default">APC</button></div>

			<div class="col-md-3"><button type="button" class="btn btn-default">MYBPC3</button></div>

			<div class="col-md-3"><button type="button" class="btn btn-default">NF1</button></div>
		</div>


		<div class="row">
			<div class="col-md-3"><button type="button" class="btn btn-default">MSH6</button></div>

			<div class="col-md-3"><button type="button" class="btn btn-default">MYH7</button></div>

			<div class="col-md-3"><button type="button" class="btn btn-default">...</button></div>

			<div class="col-md-3"><button type="button" class="btn btn-default">...</button></div>
		</div>

	</div>


	<button type="submit" class="btn btn-primary btn-lg">Buscar</button>

</form>
<div id="response">
	<ul>
	</ul>
</div>

<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

<script src="{% static 'js/search.js' %}"></script>

<script type="text/javascript">
	$(document).ready(() => {
		$('form#search-form').submit((e) => {
			e.preventDefault()
			var term = formatSearchTerm($("input[name='gene']"), $("input[name='organism']"))
			$.ajax({
				url: '',
				data: { term: term },
				success: (entries) => {
					$('#response ul').html('')
					entries.forEach((entry, _) => {
						// Insert \n after every 30 chars (10 triplets)
						// formatted_sequence = sequence.replace(/(.{30})/g,"$1<br>")
						$('#response ul').append(`
							<li>
								<a href='/details?id=${entry['Id']}'>${entry['Title']}</a>
								<p>${entry['Length']} bp</p>
							</li>
						`)
					})
				}
			})
		})
	})
</script>
</body>
</html>